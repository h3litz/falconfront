(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"35vR":function(e,t,a){"use strict";a.r(t);var n,l,s,i,r=a("U1Sa"),o=a.n(r),d=(a("N95i"),a("PGq9")),c=(a("poft"),a("WFYK")),u=(a("14R3"),a("0y9A")),m=(a("pGly"),a("LNHK")),p=(a("mcVV"),a("1DQy")),h=a("smUt"),f=a.n(h),b=a("Pjwa"),y=a.n(b),D=a("2cji"),k=a.n(D),C=a("sp3j"),g=a.n(C),E=a("vZkh"),w=a.n(E),S=a("+KCP"),V=a.n(S),v=(a("PLIw"),a("oGlb")),R=(a("iBTD"),a("+TXG")),O=(a("f+YK"),a("xrSm")),x=(a("sHWw"),a("Aywy")),F=a("ee5G"),B=a.n(F),L=a("G/Cz"),M=a("LneV"),U=a("CkN6"),N=a("zHco"),j=a("ALo4"),I=a("xQRm"),T=a.n(I),G=x["a"].Item,P=O["a"].Option,q=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},K=x["a"].create()(function(e){var t=e.originDomain,a=e.form,n=e.createUpdateVisible,l=e.handleCreateUpdateModalVisible,s=e.handleSubmit,i=function(){a.validateFields(function(e,t){e||(a.resetFields(),s(t))})},r=function(){a.resetFields(),l()};return B.a.createElement(v["a"],{destroyOnClose:!0,title:"\u6cdb\u89e3\u6790\u57df\u540d\u6dfb\u52a0",className:T.a.standardListForm,visible:n,onOk:i,onCancel:r},B.a.createElement(G,{label:"\u57df\u540d"},a.getFieldDecorator("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b50\u57df\u540d"}]})(B.a.createElement(R["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"100%"}}))),B.a.createElement(G,{label:"\u4e00\u7ea7\u57df\u540d"},a.getFieldDecorator("origin_domain",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4e00\u7ea7\u57df\u540d"}]})(B.a.createElement(O["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},t.results.map(function(e){return B.a.createElement(P,{key:e.name},e.name)})))))}),z=(n=Object(M["connect"])(function(e){var t=e.asset,a=e.loading;return{asset:t,loading:a.models.asset}}),l=x["a"].create(),n(s=l((i=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return a=g()(this,(e=w()(t)).call.apply(e,[this].concat(l))),a.state={deleteVisible:!1,deleteDone:!1,bulkDeleteVisible:!1,bulkDeleteDone:!1,selectedRows:[],formValues:{},current:{}},a.columns=[{title:"\u57df\u540d",dataIndex:"name"},{title:"\u4e00\u7ea7\u57df\u540d",dataIndex:"origin_domain"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created"},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"modified"},{title:"\u64cd\u4f5c",render:function(e,t){return B.a.createElement(F["Fragment"],null,B.a.createElement("a",{onClick:function(){return a.showDeleteModal(t)}},"\u5220\u9664"))}}],a.showModal=function(){a.setState({createUpdateVisible:!0})},a.handleCreateUpdateModalVisible=function(e){a.setState({createUpdateVisible:!!e,current:""})},a.handleSubmit=function(e){var t=a.props.dispatch;t({type:"asset/submitCdn",payload:f()({method:"cdn"},e)}),p["a"].success("\u6dfb\u52a0\u6210\u529f"),a.handleCreateUpdateModalVisible(),t({type:"asset/fetchDomain",payload:{method:"domain"}})},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.dispatch,l=t.form,s=l.getFieldsValue();a.setState({formValues:{search:s.search,originDomain:s.originDomain}}),n({type:"asset/fetchCdn",payload:f()({method:"cdn"},s)})},a.handleSearchFormReset=function(){var e=a.props.form;e.resetFields(),a.setState({formValues:{}})},a.showDeleteModal=function(e){a.setState({deleteVisible:!0,current:e})},a.handleDeleteCancel=function(){a.setState({deleteVisible:!1})},a.handleDeleteDone=function(){a.setState({deleteDone:!0,deleteVisible:!1,current:""})},a.handleDeleteItem=function(){var e=a.props.dispatch,t=a.state.current.id;a.setState({deleteDone:!0}),e({type:"asset/submitCdn",payload:{method:"cdn",id:t}}),e({type:"asset/fetchCdn",payload:{method:"cdn"}})},a.handleStandardTableChange=function(e,t,n){var l=a.props.dispatch,s=a.state.formValues,i=Object.keys(t).reduce(function(e,a){var n=f()({},e);return n[a]=q(t[a]),n},{}),r=f()({currentPage:e.current,pageSize:e.pageSize},s,i,{method:"cdn"});n.field&&(r.sorter="".concat(n.field,"_").concat(n.order)),l({type:"asset/fetchCdn",payload:r})},a.showBuldDeleteVisible=function(){a.setState({bulkDeleteVisible:!0})},a.handleBulkDelete=function(){var e=a.props.dispatch,t=a.state.selectedRows;0!==t.length&&(a.setState({selectedRows:[],bulkDeleteDone:!0}),e({type:"asset/bulkOperateCdn",payload:{ids:t.map(function(e){return e.id}),method:"cdn"}}),p["a"].success("\u64cd\u4f5c\u6210\u529f"),e({type:"asset/fetchCdn",payload:{method:"cdn"}}))},a.handleBulkDeleteDone=function(){a.setState({bulkDeleteDone:!0,bulkDeleteVisible:!1})},a.handelBulkDeleteCancel=function(){a.setState({bulkDeleteVisible:!1})},a.handleMenuClick=function(e){var t,n=a.props.dispatch,l=a.state.selectedRows;if(0!==l.length){switch(e.key){case"offline":t=0;break;case"online":t=1;break;default:return}n({type:"asset/bulkOperateCdn",payload:{ids:l.map(function(e){return e.id}),status:t,method:"cdn"}}),a.setState({selectedRows:[]}),p["a"].success("\u64cd\u4f5c\u6210\u529f"),n({type:"asset/fetchCdn",payload:{method:"cdn"}})}},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a}return V()(t,e),k()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"asset/fetchCdn",payload:{method:"cdn"}}),e({type:"asset/fetchOriginDomain",payload:{method:"originDomain"}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.asset,n=a.cdndomain,l=a.originDomain,s=t.loading,i=t.form.getFieldDecorator,r=this.state,p=r.selectedRows,h=r.createUpdateVisible,f=r.deleteVisible,b=r.bulkDeleteVisible,y=r.bulkDeleteDone,D=r.current,k=r.deleteDone,C=void 0===k?{}:k,g={handleSubmit:this.handleSubmit,handleCreateUpdateModalVisible:this.handleCreateUpdateModalVisible},E=C?{footer:null,onCancel:this.handleDeleteDone}:{okText:"\u5220\u9664",onOk:this.handleDeleteItem,onCancel:this.handleDeleteCancel},w=y?{footer:null,onCancel:this.handelBulkDeleteDone}:{okText:"\u5220\u9664",onOk:this.handleBulkDelete,onCancel:this.handelBulkDeleteCancel},S=function(){return C?B.a.createElement(j["a"],{type:"success",title:"\u5220\u9664\u6210\u529f",description:"\u5220\u9664\u6cdb\u89e3\u6790\u57df\u540d\u6210\u529f",actions:B.a.createElement(m["a"],{type:"primary",onClick:e.handleDeleteDone},"\u77e5\u9053\u4e86"),className:T.a.formResult}):B.a.createElement("p",null,"\u786e\u5b9a\u5220\u9664\u8be5\u57df\u540d\uff1f")},V=function(){return y?B.a.createElement(j["a"],{type:"success",title:"\u5220\u9664\u6210\u529f",description:"\u5220\u9664\u57df\u540d\u6210\u529f",actions:B.a.createElement(m["a"],{type:"primary",onClick:e.handleBulkDeleteDone},"\u77e5\u9053\u4e86"),className:T.a.formResult}):B.a.createElement("p",null,"\u786e\u5b9a\u6279\u91cf\u5220\u9664\u57df\u540d\uff1f")};return B.a.createElement(N["a"],{title:"\u6cdb\u89e3\u6790\u57df\u540d\u5217\u8868"},B.a.createElement(d["a"],{bordered:!1},B.a.createElement("div",{className:T.a.tableListForm},B.a.createElement(x["a"],{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(c["a"],{gutter:{md:6,lg:24,xl:48}},B.a.createElement(u["a"],{md:6,sm:24},B.a.createElement(G,{label:"\u641c\u7d22"},i("search",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165"}]})(B.a.createElement(R["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"100%"}})))),B.a.createElement(u["a"],{md:6,sm:24},B.a.createElement(G,{label:"\u4e00\u7ea7\u57df\u540d"},i("originDomain",{rules:[{required:!1,message:"\u4e00\u7ea7\u57df\u540d"}]})(B.a.createElement(O["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},l.results.map(function(e){return B.a.createElement(P,{key:e.id},e.name)}))))),B.a.createElement(u["a"],{md:4,sm:24},B.a.createElement("span",{className:T.a.submitButtons},B.a.createElement(m["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),B.a.createElement(m["a"],{style:{marginLeft:8},onClick:this.handleSearchFormReset},"\u91cd\u7f6e"))))),B.a.createElement("div",{className:T.a.tableListOperator},B.a.createElement(m["a"],{icon:"plus",type:"primary",onClick:function(){return e.showModal()},ref:function(t){e.addBtn=Object(L["findDOMNode"])(t)}},"\u65b0\u5efa"),p.length>0&&B.a.createElement("span",null,B.a.createElement(m["a"],{onClick:this.showBuldDeleteVisible},"\u6279\u91cf\u5220\u9664"))),B.a.createElement(U["a"],{selectedRows:p,loading:s,data:n,columns:this.columns,rowKey:function(e){return e.id},onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,scroll:{x:2e3}}))),B.a.createElement(K,o()({originDomain:l,current:D,createUpdateVisible:h},g)),B.a.createElement(v["a"],o()({title:"\u5220\u9664\u57df\u540d",destroyOnClose:!0,visible:f},E),S()),B.a.createElement(v["a"],o()({title:"\u6279\u91cf\u5220\u9664",destroyOnClose:!0,visible:b},w),V()))}}]),t}(F["PureComponent"]),s=i))||s)||s);t["default"]=z},xQRm:function(e,t,a){e.exports={tableList:"antd-pro-pages-asset-cdn-index-tableList",tableListOperator:"antd-pro-pages-asset-cdn-index-tableListOperator",tableListForm:"antd-pro-pages-asset-cdn-index-tableListForm",submitButtons:"antd-pro-pages-asset-cdn-index-submitButtons"}}}]);